<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/style.css">
    <title>Your Cart</title>
  </head>
  <body>
    <header>
      <h1>Your Cart</h1>
      <div>
        <a class="cart-link" href="/">Catalog</a>
        {% if current_user.is_authenticated %}
          {% if current_user.is_admin %}
            <a class="cart-link" href="/admin">Admin</a>
          {% endif %}
          <a class="cart-link" href="/logout">Logout</a>
        {% else %}
          <a class="cart-link" href="/login">Login</a>
        {% endif %}
      </div>
    </header>
    <main>
      {% if items %}
        <table class="cart-table">
          <tr><th>Product</th><th>Qty</th><th></th></tr>
          {% for it in items %}
            <tr>
              <td style="display:flex;gap:8px;align-items:center"><img src="/{{ it.image if it.image else 'static/placeholder.svg' }}" style="width:48px;height:48px;object-fit:cover"/> {{ it.name }}</td>
              <td>{{ it.qty }}</td>
              <td><a class="btn small" href="/remove/{{ it.id }}">Remove</a></td>
            </tr>
          {% endfor %}
        </table>
        <div class="cart-total">Total: ${{ '%.2f'|format(total) }}</div>
        <a class="btn" href="/checkout">Checkout</a>
      {% else %}
        <p>Your cart is empty.</p>
      {% endif %}
    </main>
  </body>
</html>
